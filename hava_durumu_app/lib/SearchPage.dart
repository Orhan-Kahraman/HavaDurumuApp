import 'dart:convert';import 'package:flutter/cupertino.dart';import 'package:flutter/material.dart';import 'package:http/http.dart' as http;class SearchPage extends StatefulWidget {  const SearchPage({Key? key}) : super(key: key);  @override  _SearchPageState createState() => _SearchPageState();}class _SearchPageState extends State<SearchPage> {  final mycontroller = TextEditingController();  void _showDialog() {    // flutter defined function    showDialog(      context: context,      builder: (BuildContext context) {        // return object of type Dialog        return AlertDialog(          title: new Text("Geçersiz Şehir"),          content: new Text("Lütfen geçerli bir şehir giriniz."),          actions: <Widget>[            // usually buttons at the bottom of the dialog            new FlatButton(              child: new Text("Kapat"),              onPressed: () {                Navigator.of(context).pop();              },            ),          ],        );      },    );  }  @override  Widget build(BuildContext context) {    return Container(      decoration: BoxDecoration(        image: DecorationImage(            fit: BoxFit.cover, image: AssetImage("assets/earth.jpg")),      ),      child: Scaffold(        backgroundColor: Colors.transparent,        appBar: AppBar(          title: Text(            "Lütfen Şehir Arayın",          ),          backgroundColor: Colors.transparent,        ),        body: Center(          child: Column(            children: [              SizedBox(                height: 50,              ),              Padding(                padding: const EdgeInsets.symmetric(horizontal: 50),                child: TextField(                  controller: mycontroller,                  decoration: InputDecoration(                      fillColor: Colors.white,                      focusColor: Colors.cyanAccent,                      hintText: "Şehir Giriniz",                      border: OutlineInputBorder(                        borderRadius: BorderRadius.vertical(                            bottom: Radius.circular(30),                            top: Radius.circular(10)),                      )),                  style: TextStyle(fontSize: 20),                ),              ),              SizedBox(                height: 30,              ),              TextButton(                onPressed: () async {                  var response = await http.get(Uri.parse(                      "https://www.metaweather.com/api/location/search/?query=${mycontroller.text}"));                  jsonDecode(response.body).isEmpty                      ? _showDialog()                      : Navigator.pop(context, mycontroller.text);                  print(mycontroller.text);                },                child: Text(                  "Search",                ),                style: TextButton.styleFrom(                    backgroundColor: Colors.blue[800],                    primary: Colors.white,                    side: BorderSide(style: BorderStyle.none),                    padding: EdgeInsets.all(10),                    textStyle:                        TextStyle(fontSize: 20, fontWeight: FontWeight.w600)),              )            ],          ),        ),      ),    );  }}